<script setup>
import { watchEffect } from 'vue';
import { useModalStore } from '@/stores/modal.store';

const modalStore = useModalStore();

// –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∫—Ä–æ–ª–ª–∞ body –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏
watchEffect(() => {
    if (modalStore.isCalculationDetailsModalOpen) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = '';
    }

    return () => {
        document.body.style.overflow = '';
    };
});

const closeModal = () => {
    modalStore.closeCalculationDetailsModal();
};
</script>

<template>
    <div v-if="modalStore.isCalculationDetailsModalOpen" class="modal modal--large modal--calculation-details">
        <div class="modal__overlay" @click="closeModal"></div>
        <div class="modal__container">
            <div class="modal__content">
                <div class="calculation-details">
                    <div class="calculation-details__header">
                        <h2 class="calculation-details__title">–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç</h2>
                        <button class="modal__close" @click="closeModal">
                            <span class="modal__close-icon">√ó</span>
                        </button>
                    </div>

                    <div class="calculation-details__content">
                        <section class="calculation-details__section">
                            <h3 class="calculation-details__section-title">üî≠ –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫</h3>
                            <p class="calculation-details__text">
                                –ù–∞—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
                                <a href="https://github.com/cosinekitty/astronomy-engine" target="_blank" rel="noopener noreferrer" class="calculation-details__link">
                                    Astronomy Engine
                                </a>
                                ‚Äî –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏–π –Ω–µ–±–µ—Å–Ω—ã—Ö —Ç–µ–ª.
                            </p>
                            <p class="calculation-details__text">
                                –≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–æ–≤ –¥–æ –¥–æ–ª–µ–π —É–≥–ª–æ–≤–æ–π —Å–µ–∫—É–Ω–¥—ã –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
                                –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∞–º–∏ –∏ –∞—Å—Ç—Ä–æ–ª–æ–≥–∞–º–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.
                            </p>
                        </section>

                        <section class="calculation-details__section">
                            <h3 class="calculation-details__section-title">ü™ê –†–∞—Å—á–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏–π –ø–ª–∞–Ω–µ—Ç</h3>
                            <p class="calculation-details__text">
                                –ü–æ–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ—Ö –ø–ª–∞–Ω–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:
                            </p>
                            <ul class="calculation-details__list">
                                <li><strong>–ì–µ–æ—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</strong> ‚Äî –ø–æ–ª–æ–∂–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∞ –ó–µ–º–ª–∏</li>
                                <li><strong>–≠–∫–ª–∏–ø—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–ª–≥–æ—Ç—ã –∏ —à–∏—Ä–æ—Ç—ã</strong> ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –ø–ª–æ—Å–∫–æ—Å—Ç–∏ —ç–∫–ª–∏–ø—Ç–∏–∫–∏</li>
                                <li><strong>–ò—Å—Ç–∏–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</strong> ‚Äî —Å —É—á–µ—Ç–æ–º —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –∏ UTC</li>
                                <li><strong>–Æ–ª–∏–∞–Ω—Å–∫–æ–≥–æ –¥–Ω—è</strong> ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —à–∫–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏</li>
                            </ul>
                        </section>

                        <section class="calculation-details__section">
                            <h3 class="calculation-details__section-title">üè† –°–∏—Å—Ç–µ–º—ã –¥–æ–º–æ–≤</h3>
                            <p class="calculation-details__text">
                                –î–æ—Å—Ç—É–ø–Ω—ã 9 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –¥–æ–º–æ–≤ ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–µ–ª–µ–Ω–∏—è —ç–∫–ª–∏–ø—Ç–∏–∫–∏ –Ω–∞ 12 —Å–µ–∫—Ç–æ—Ä–æ–≤,
                                –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ñ–µ—Ä–µ –∂–∏–∑–Ω–∏:
                            </p>
                            <ul class="calculation-details__list">
                                <li><strong>Placidus (–ü–ª–∞—Ü–∏–¥—É—Å)</strong> ‚Äî –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, —É—á–∏—Ç—ã–≤–∞–µ—Ç —à–∏—Ä–æ—Ç—É</li>
                                <li><strong>Koch (–ö–æ—Ö)</strong> ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</li>
                                <li><strong>Equal House (–†–∞–≤–Ω–æ–¥–æ–º–Ω–∞—è)</strong> ‚Äî –ø—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å —Ä–∞–≤–Ω—ã–º–∏ –¥–æ–º–∞–º–∏</li>
                                <li><strong>Whole Sign (–¶–µ–ª—ã–π –∑–Ω–∞–∫)</strong> ‚Äî —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –≤–µ–¥–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</li>
                                <li><strong>Porphyry (–ü–æ—Ä—Ñ–∏—Ä–∏–π)</strong> ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –º–µ–∂–¥—É Placidus –∏ Equal</li>
                                <li><strong>Regiomontanus (–†–µ–≥–∏–æ–º–æ–Ω—Ç–∞–Ω)</strong> ‚Äî –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</li>
                                <li><strong>Campanus (–ö–∞–º–ø–∞–Ω—É—Å)</strong> ‚Äî —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</li>
                                <li><strong>Alcabitius (–ê–ª—å–∫–∞–±–∏—Ç–∏—É—Å)</strong> ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ</li>
                                <li><strong>Morinus (–ú–æ—Ä–∏–Ω—É—Å)</strong> ‚Äî —à–∏—Ä–æ—Ç–Ω–æ-–≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞</li>
                            </ul>
                        </section>

                        <section class="calculation-details__section">
                            <h3 class="calculation-details__section-title">‚≠ê –†–∞—Å—á–µ—Ç –∞—Å–ø–µ–∫—Ç–æ–≤</h3>
                            <p class="calculation-details__text">
                                –ê—Å–ø–µ–∫—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–∏ –ø–ª–∞–Ω–µ—Ç —Å —É—á–µ—Ç–æ–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –æ—Ä–±–∏—Å–æ–≤:
                            </p>
                            <ul class="calculation-details__list">
                                <li><strong>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (0¬∞)</strong> ‚Äî –ø–ª–∞–Ω–µ—Ç—ã –≤ –æ–¥–Ω–æ–º –∑–Ω–∞–∫–µ</li>
                                <li><strong>–°–µ–∫—Å—Ç–∏–ª—å (60¬∞)</strong> ‚Äî –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π –∞—Å–ø–µ–∫—Ç</li>
                                <li><strong>–ö–≤–∞–¥—Ä–∞—Ç—É—Ä–∞ (90¬∞)</strong> ‚Äî –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–π –∞—Å–ø–µ–∫—Ç</li>
                                <li><strong>–¢—Ä–∏–≥–æ–Ω (120¬∞)</strong> ‚Äî –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π –∞—Å–ø–µ–∫—Ç</li>
                                <li><strong>–û–ø–ø–æ–∑–∏—Ü–∏—è (180¬∞)</strong> ‚Äî –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–π –∞—Å–ø–µ–∫—Ç</li>
                                <li><strong>–ú–∏–Ω–æ—Ä–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã</strong> ‚Äî –ø–æ–ª—É—Å–µ–∫—Å—Ç–∏–ª—å, —Å–µ–º–∏–∫–≤–∞–¥—Ä–∞—Ç, –∫–≤–∏–Ω—Ç–∏–ª—å –∏ –¥—Ä.</li>
                            </ul>
                            <p class="calculation-details__text">
                                –û—Ä–±–∏—Å—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ø—Ä–∏—Ä–æ–¥—ã –ø–ª–∞–Ω–µ—Ç: –≤–Ω–µ—à–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã (–Æ–ø–∏—Ç–µ—Ä, –°–∞—Ç—É—Ä–Ω, –£—Ä–∞–Ω, –ù–µ–ø—Ç—É–Ω, –ü–ª—É—Ç–æ–Ω)
                                –∏–º–µ—é—Ç –±–æ–ª—å—à–∏–π –¥–æ–ø—É—Å–∫ —Ç–æ—á–Ω–æ—Å—Ç–∏.
                            </p>
                        </section>

                        <section class="calculation-details__section">
                            <h3 class="calculation-details__section-title">üìä –¢–æ—á–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å</h3>
                            <p class="calculation-details__text">
                                –°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
                            </p>
                            <ul class="calculation-details__list">
                                <li><strong>–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫—É—é —Ç–æ—á–Ω–æ—Å—Ç—å</strong> ‚Äî –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º —ç—Ñ–µ–º–µ—Ä–∏–¥–∞–º</li>
                                <li><strong>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å</strong> ‚Äî –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã</li>
                                <li><strong>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã</strong> ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–µ–π—à–∏—Ö –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤</li>
                                <li><strong>–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é —Ç–æ—á–Ω–æ—Å—Ç—å</strong> ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</li>
                            </ul>
                        </section>

                        <section class="calculation-details__section">
                            <h3 class="calculation-details__section-title">üéØ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç—Ä–∞–¥–∏—Ü–∏—è–º–∏</h3>
                            <p class="calculation-details__text">
                                –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–∞
                                —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å,
                                –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—É—é –ø—Ä–∏ —Ä—É—á–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–∞—Ö.
                            </p>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<style scoped>
.calculation-details {
    max-width: 100%;
}

.calculation-details__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 32px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--color-border);
}

.calculation-details__title {
    font-size: 28px;
    font-weight: 700;
    color: var(--color-text-primary);
    margin: 0;
}

.calculation-details__content {
    max-height: 70vh;
    overflow-y: auto;
    padding-right: 16px;
}

.calculation-details__section {
    margin-bottom: 32px;
}

.calculation-details__section-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--color-primary);
    margin: 0 0 16px 0;
}

.calculation-details__text {
    font-size: 16px;
    line-height: 1.6;
    color: var(--color-text-secondary);
    margin: 0 0 16px 0;
}

.calculation-details__list {
    margin: 16px 0;
    padding-left: 24px;
}

.calculation-details__list li {
    margin-bottom: 8px;
    color: var(--color-text-secondary);
}

.calculation-details__link {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
    border-bottom: 1px solid transparent;
    transition: border-color 0.2s ease;
}

.calculation-details__link:hover {
    border-bottom-color: var(--color-primary);
}
</style>
